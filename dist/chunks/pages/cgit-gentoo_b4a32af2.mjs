/* empty css                          */import { a as createComponent, r as renderTemplate, e as renderComponent, u as unescapeHTML } from '../astro_71295d57.mjs';
import 'clsx';
import { $ as $$BlogPost } from './bedrock-linux_cd29f8c0.mjs';

const html = "<hr>\n<h2 id=\"titledate-2023-02-16\">title:\ndate: 2023-02-16</h2>\n<h1 id=\"set-up-cgit-using-uwsgi--nginx-on-gentoo\">set up cgit using uwsgi &#x26; nginx on gentoo</h1>\n<blockquote>\n<p>i recommend mainly using the root user for this</p>\n</blockquote>\n<blockquote>\n<p>this is partially copied from the wiki, but just my setup for when i reinstall :)</p>\n</blockquote>\n<pre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#79B8FF\">echo</span><span style=\"color:#9ECBFF\"> \"www-servers/uwsgi cgi\"</span><span style=\"color:#F97583\"> >></span><span style=\"color:#9ECBFF\"> /etc/portage/package.use/uwsgi</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">root</span><span style=\"color:#6A737D\"> # emerge -avq www-apps/cgit www-servers/nginx www-servers/uwsgi</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">root</span><span style=\"color:#6A737D\"> # useradd -m -s /bin/bash git</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">root</span><span style=\"color:#6A737D\"> # su - git</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#B392F0\">git</span><span style=\"color:#E1E4E8\"> $ </span><span style=\"color:#9ECBFF\">mkdir</span><span style=\"color:#9ECBFF\"> ~/repos</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">git</span><span style=\"color:#E1E4E8\"> $ </span><span style=\"color:#9ECBFF\">chown</span><span style=\"color:#9ECBFF\"> git:nginx</span><span style=\"color:#9ECBFF\"> ~/repos</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">git</span><span style=\"color:#E1E4E8\"> $ </span><span style=\"color:#9ECBFF\">chmod</span><span style=\"color:#79B8FF\"> 750</span><span style=\"color:#9ECBFF\"> ~/repos</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#B392F0\">root</span><span style=\"color:#6A737D\"> # nvim /etc/cgitrc</span></span></code></pre>\n<h2 id=\"my-etccgitrc-tweak-what-you-want\">my /etc/cgitrc, tweak what you want:</h2>\n<pre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#6A737D\"># Make cgit generate link using absolute URL</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">virtual-root</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">/</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># The maximum number of entries in the cgit cache. When set to \"0\",</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># caching is disabled.</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">cache-size</span><span style=\"color:#F97583\">=</span><span style=\"color:#79B8FF\">0</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Cache time to live</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># All cache ttl values are in minutes. Negative ttl values indicate that a page</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># type will never expire, and thus the first time a URL is accessed, the result</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># will be cached indefinitely, even if the underlying git repository changes.</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Conversely, when a ttl value is zero, the cache is disabled for that</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># particular page type, and the page type is never cached.</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">cache-dynamic-ttl</span><span style=\"color:#F97583\">=</span><span style=\"color:#79B8FF\">0</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">cache-repo-ttl</span><span style=\"color:#F97583\">=</span><span style=\"color:#79B8FF\">0</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Specify some default clone urls using macro expansion</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">clone-url</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">https://git.ahwx.org/</span><span style=\"color:#E1E4E8\">$CGIT_REPO_URL</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Specify the css url</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">css</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">/cgit.css</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Show owner on index page</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">enable-index-owner</span><span style=\"color:#F97583\">=</span><span style=\"color:#79B8FF\">0</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Allow http transport git clone</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">enable-http-clone</span><span style=\"color:#F97583\">=</span><span style=\"color:#79B8FF\">1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Show extra links for each repository on the index page</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">enable-index-links</span><span style=\"color:#F97583\">=</span><span style=\"color:#79B8FF\">1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Remove .git suffix from project display</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">remove-suffix</span><span style=\"color:#F97583\">=</span><span style=\"color:#79B8FF\">1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Enable ASCII art commit history graph on the log pages</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">enable-commit-graph</span><span style=\"color:#F97583\">=</span><span style=\"color:#79B8FF\">1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Show number of affected files per commit on the log pages</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">enable-log-filecount</span><span style=\"color:#F97583\">=</span><span style=\"color:#79B8FF\">1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Show number of added/removed lines per commit on the log pages</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">enable-log-linecount</span><span style=\"color:#F97583\">=</span><span style=\"color:#79B8FF\">1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Sort branches by date</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">branch-sort</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">age</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Add a cgit favicon</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">favicon</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">/favicon.ico</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Use a custom logo</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">logo</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">/cgit.png</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Enable statistics per week, month and quarter</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">max-stats</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">year</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Set the title and heading of the repository index page</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">root-title</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">Ahwx</span><span style=\"color:#B392F0\"> Git</span><span style=\"color:#9ECBFF\"> Repositories</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Set a subheading for the repository index page</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">root-desc</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">Ahwx</span><span style=\"color:#B392F0\"> development</span><span style=\"color:#9ECBFF\"> garbage</span><span style=\"color:#E1E4E8\"> &#x26; </span><span style=\"color:#B392F0\">other</span><span style=\"color:#9ECBFF\"> nonsense</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Allow download of tar.gz, tar.bz2 and zip-files</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">snapshots</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">tar.bz2</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># List of common mimetypes</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># See https://www.sitepoint.com/mime-types-complete-list/</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">mimetype.html</span><span style=\"color:#E1E4E8\">=text/html</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">mimetype.js</span><span style=\"color:#E1E4E8\">=text/javascript</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">mimetype.css</span><span style=\"color:#E1E4E8\">=text/css</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">mimetype.pl</span><span style=\"color:#E1E4E8\">=text/x-script.perl</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">mimetype.pm</span><span style=\"color:#E1E4E8\">=text/x-script.perl-module</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">mimetype.py</span><span style=\"color:#E1E4E8\">=text/x-script.python</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">mimetype.png</span><span style=\"color:#E1E4E8\">=image/png</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">mimetype.gif</span><span style=\"color:#E1E4E8\">=image/gif</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">mimetype.jpg</span><span style=\"color:#E1E4E8\">=image/jpeg</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">mimetype.jpeg</span><span style=\"color:#E1E4E8\">=image/jpeg</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Highlight source code with python pygments-based highligher</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">source-filter</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">/usr/lib64/cgit/filters/syntax-highlighting.py</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Format markdown, restructuredtext, manpages, text files, and html files</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># through the right converters</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">about-filter</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">/usr/local/lib/cgit/filters/about-formatting.sh</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Search for these files in the root of the default branch of repositories</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># for coming up with the about page:</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:README.md</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:readme.md</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:README.mkd</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:readme.mkd</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:README.rst</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:readme.rst</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:README.html</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:readme.html</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:README.htm</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:readme.htm</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:README.txt</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:readme.txt</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:README</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:readme</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:INSTALL.md</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:install.md</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:INSTALL.mkd</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:install.mkd</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:INSTALL.rst</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:install.rst</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:INSTALL.html</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:install.html</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:INSTALL.htm</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:install.htm</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:INSTALL.txt</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:install.txt</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:INSTALL</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">readme</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">:install</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Repositories.</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># There are 2 options, please choose one:</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">#</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Option 1 - separate entries for each repo</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">#</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">#repo.url=My-Repo</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">#repo.path=/home/someuser/repos/My-Repo</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">#repo.desc=Some description</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">#repo.owner=author@some.email</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">#repo.readme=info/web/about.html</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">#</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Option 2 - a list with all repos</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># (description, owner etc can be indicated inside repos)</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">#</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">enable-git-config</span><span style=\"color:#F97583\">=</span><span style=\"color:#79B8FF\">1</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">scan-path</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">/home/git/repos</span></span>\n<span class=\"line\"></span></code></pre>\n<h2 id=\"homegituwsgicgitini\">/home/git/uwsgi.cgit.ini</h2>\n<pre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#E1E4E8\">[uwsgi]</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">; </span><span style=\"color:#B392F0\">enables</span><span style=\"color:#9ECBFF\"> logging</span><span style=\"color:#9ECBFF\"> via</span><span style=\"color:#9ECBFF\"> the</span><span style=\"color:#9ECBFF\"> system-default</span><span style=\"color:#9ECBFF\"> syslog</span><span style=\"color:#9ECBFF\"> program</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">; (for example, syslog-ng)</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">logger</span><span style=\"color:#9ECBFF\"> =</span><span style=\"color:#9ECBFF\"> syslog</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">; </span><span style=\"color:#B392F0\">recommended</span><span style=\"color:#9ECBFF\"> for</span><span style=\"color:#9ECBFF\"> all</span><span style=\"color:#9ECBFF\"> your</span><span style=\"color:#9ECBFF\"> apps,</span><span style=\"color:#9ECBFF\"> unless</span><span style=\"color:#9ECBFF\"> you're using emperor</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">; https://stackoverflow.com/a/35080578</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">master = true</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">; can be nginx or of other web-server</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">; CAN NOT BE ROOT !!</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">uid = nginx</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">gid = nginx</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">; please tune according to your needs</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">processes = 1</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">threads = 4</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">; cgit requires cgi</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">plugins = cgi</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">; location where all uwsgi plugins were installed</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">plugins-dir = /usr/lib64/uwsgi/</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">; modifier for uwsgi packets to fit into cgi standard</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">; https://uwsgi-docs.readthedocs.io/en/latest/Protocol.html</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">http-modifier1 = 9</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">; name can be any</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">socket = /run/uwsgi_cgit/uwsgi_cgit.sock</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">chmod-socket = 600</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">pidfile = /run/uwsgi_cgit/uwsgi_cgit.pid</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">; can be any address:port on localhost</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">; useful for debugging - just curl that address</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">; http = 127.0.0.7:7777</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">; location where the cgi binary was installed</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">; MUST BE CHANGED accordingly in case of installing another cgit version</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">chdir = /usr/share/webapps/cgit/1.2.3-r201/hostroot/cgi-bin</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">; cgi binary name</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">cgi = cgit.cgi</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">; this is an alternative to nginx rewrite rule</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">; \"rewrite ^/subdirectory/(.*)$ /subdirectory/$1?url=/$1 break;\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">route-uri = ^/(.*) rewrite:/$1</span></span></code></pre>\n<pre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#B392F0\">root</span><span style=\"color:#6A737D\"> # ln -s /etc/init.d/uwsgi /etc/init.d/uwsgi.cgit</span></span></code></pre>\n<pre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#6A737D\"># Distributed under the terms of the GNU General Public License v2</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># Additional options you might want to pass to uWSGI</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">#</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">UWSGI_EXTRA_OPTIONS</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">\"--ini /home/git/uwsgi.cgit.ini\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># The application will run as nginx:nginx even without these,</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># because uid and gid are set to nginx in /home/someuser/uwsgi.cgit.ini,</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># but these are necessary for changing permissions of the directory</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># /run/uwsgi_cgit (and permitting the application to create a socket there)</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">#</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">UWSGI_USER</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">nginx</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">UWSGI_GROUP</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">nginx</span></span></code></pre>\n<h2 id=\"nginx\">nginx</h2>\n<p>for nginx, just make a server and make sure it looks something like this and add some ssl certs</p>\n<pre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#B392F0\">server</span><span style=\"color:#9ECBFF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">    listen</span><span style=\"color:#79B8FF\"> 80</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">    server_name</span><span style=\"color:#9ECBFF\"> git.ahwx.org</span><span style=\"color:#E1E4E8\"> ;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#B392F0\">    root</span><span style=\"color:#9ECBFF\"> /home/git/</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">    try_files</span><span style=\"color:#E1E4E8\"> $uri </span><span style=\"color:#9ECBFF\">@cgit</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#B392F0\">    location</span><span style=\"color:#9ECBFF\"> ~</span><span style=\"color:#79B8FF\">*</span><span style=\"color:#9ECBFF\"> ^.+</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#B392F0\">cgit.(css</span><span style=\"color:#F97583\">|</span><span style=\"color:#B392F0\">png</span><span style=\"color:#E1E4E8\">)</span><span style=\"color:#F97583\">|</span><span style=\"color:#B392F0\">favicon.ico</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">        root</span><span style=\"color:#9ECBFF\"> /usr/share/webapps/cgit/1.2.3-r201/htdocs/</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">        expires</span><span style=\"color:#79B8FF\"> 30</span><span style=\"color:#9ECBFF\">d</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#B392F0\">    location</span><span style=\"color:#9ECBFF\"> /</span><span style=\"color:#9ECBFF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">        uwsgi_pass</span><span style=\"color:#9ECBFF\"> uwsgi_cgit</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">        include</span><span style=\"color:#9ECBFF\"> uwsgi_params</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">        uwsgi_param</span><span style=\"color:#9ECBFF\"> PATH_INFO</span><span style=\"color:#FFAB70\"> $1</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">        uwsgi_modifier1</span><span style=\"color:#79B8FF\"> 9</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">        uwsgi_param</span><span style=\"color:#9ECBFF\"> GIT_HTTP_EXPORT_ALL</span><span style=\"color:#9ECBFF\"> \"\"</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">        uwsgi_param</span><span style=\"color:#9ECBFF\"> GIT_PROJECT_ROOT</span><span style=\"color:#9ECBFF\"> /home/git</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    }</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">}</span></span></code></pre>\n<h2 id=\"start-it\">start it</h2>\n<pre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#B392F0\">rc-service</span><span style=\"color:#9ECBFF\"> uwsgi.cgit</span><span style=\"color:#9ECBFF\"> start</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">rc-service</span><span style=\"color:#9ECBFF\"> nginx</span><span style=\"color:#9ECBFF\"> restart</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">rc-update</span><span style=\"color:#9ECBFF\"> add</span><span style=\"color:#9ECBFF\"> uwsgi.cgit</span><span style=\"color:#9ECBFF\"> default</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">rc-update</span><span style=\"color:#9ECBFF\"> add</span><span style=\"color:#9ECBFF\"> nginx</span><span style=\"color:#9ECBFF\"> default</span></span></code></pre>\n<h1 id=\"make-sure-to\">make sure to:</h1>\n<ul>\n<li>change the version for cgit on every update</li>\n<li>check if git clone works over http</li>\n<li>keep you stuff updated</li>\n</ul>";

				const frontmatter = {"layout":"../../layouts/blogPost.astro","title":"Git hosting done right","pubDate":"2023-08-14T00:00:00.000Z","description":"Set up Cgit using UWSGI & NGINX on Gentoo","author":"Ahwx"};
				const file = "/home/liv/Development/ahwx.org/src/pages/blog/cgit-gentoo.md";
				const url = "/blog/cgit-gentoo";
				function rawContent() {
					return "\n---\ntitle: \ndate: 2023-02-16\n---\n\n# set up cgit using uwsgi & nginx on gentoo\n\n> i recommend mainly using the root user for this\n\n> this is partially copied from the wiki, but just my setup for when i reinstall :)\n\n```sh\necho \"www-servers/uwsgi cgi\" >> /etc/portage/package.use/uwsgi\nroot # emerge -avq www-apps/cgit www-servers/nginx www-servers/uwsgi\nroot # useradd -m -s /bin/bash git\nroot # su - git\n\ngit $ mkdir ~/repos\ngit $ chown git:nginx ~/repos\ngit $ chmod 750 ~/repos\n\nroot # nvim /etc/cgitrc\n```\n\n## my /etc/cgitrc, tweak what you want:\n\n```sh\n# Make cgit generate link using absolute URL\nvirtual-root=/\n\n# The maximum number of entries in the cgit cache. When set to \"0\",\n# caching is disabled.\ncache-size=0\n\n# Cache time to live\n# All cache ttl values are in minutes. Negative ttl values indicate that a page\n# type will never expire, and thus the first time a URL is accessed, the result\n# will be cached indefinitely, even if the underlying git repository changes.\n# Conversely, when a ttl value is zero, the cache is disabled for that\n# particular page type, and the page type is never cached.\ncache-dynamic-ttl=0\ncache-repo-ttl=0\n\n# Specify some default clone urls using macro expansion\nclone-url=https://git.ahwx.org/$CGIT_REPO_URL\n\n# Specify the css url\ncss=/cgit.css\n\n# Show owner on index page\nenable-index-owner=0\n\n# Allow http transport git clone\nenable-http-clone=1\n\n# Show extra links for each repository on the index page\nenable-index-links=1\n\n# Remove .git suffix from project display\nremove-suffix=1\n\n# Enable ASCII art commit history graph on the log pages\nenable-commit-graph=1\n\n# Show number of affected files per commit on the log pages\nenable-log-filecount=1\n\n# Show number of added/removed lines per commit on the log pages\nenable-log-linecount=1\n\n# Sort branches by date\nbranch-sort=age\n\n# Add a cgit favicon\nfavicon=/favicon.ico\n\n# Use a custom logo\nlogo=/cgit.png\n\n# Enable statistics per week, month and quarter\nmax-stats=year\n\n# Set the title and heading of the repository index page\nroot-title=Ahwx Git Repositories\n\n# Set a subheading for the repository index page\nroot-desc=Ahwx development garbage & other nonsense\n\n# Allow download of tar.gz, tar.bz2 and zip-files\nsnapshots=tar.bz2\n\n# List of common mimetypes\n# See https://www.sitepoint.com/mime-types-complete-list/\nmimetype.html=text/html\nmimetype.js=text/javascript\nmimetype.css=text/css\nmimetype.pl=text/x-script.perl\nmimetype.pm=text/x-script.perl-module\nmimetype.py=text/x-script.python\nmimetype.png=image/png\nmimetype.gif=image/gif\nmimetype.jpg=image/jpeg\nmimetype.jpeg=image/jpeg\n\n# Highlight source code with python pygments-based highligher\nsource-filter=/usr/lib64/cgit/filters/syntax-highlighting.py\n\n# Format markdown, restructuredtext, manpages, text files, and html files\n# through the right converters\nabout-filter=/usr/local/lib/cgit/filters/about-formatting.sh\n\n# Search for these files in the root of the default branch of repositories\n# for coming up with the about page:\nreadme=:README.md\nreadme=:readme.md\nreadme=:README.mkd\nreadme=:readme.mkd\nreadme=:README.rst\nreadme=:readme.rst\nreadme=:README.html\nreadme=:readme.html\nreadme=:README.htm\nreadme=:readme.htm\nreadme=:README.txt\nreadme=:readme.txt\nreadme=:README\nreadme=:readme\nreadme=:INSTALL.md\nreadme=:install.md\nreadme=:INSTALL.mkd\nreadme=:install.mkd\nreadme=:INSTALL.rst\nreadme=:install.rst\nreadme=:INSTALL.html\nreadme=:install.html\nreadme=:INSTALL.htm\nreadme=:install.htm\nreadme=:INSTALL.txt\nreadme=:install.txt\nreadme=:INSTALL\nreadme=:install\n\n# Repositories.\n# There are 2 options, please choose one:\n#\n# Option 1 - separate entries for each repo\n#\n#repo.url=My-Repo\n#repo.path=/home/someuser/repos/My-Repo\n#repo.desc=Some description\n#repo.owner=author@some.email\n#repo.readme=info/web/about.html\n#\n# Option 2 - a list with all repos\n# (description, owner etc can be indicated inside repos)\n#\nenable-git-config=1\nscan-path=/home/git/repos\n\n```\n\n## /home/git/uwsgi.cgit.ini\n```sh\n[uwsgi]\n; enables logging via the system-default syslog program\n; (for example, syslog-ng)\nlogger = syslog\n\n; recommended for all your apps, unless you're using emperor\n; https://stackoverflow.com/a/35080578\nmaster = true\n\n; can be nginx or of other web-server\n; CAN NOT BE ROOT !!\nuid = nginx\ngid = nginx\n\n; please tune according to your needs\nprocesses = 1\nthreads = 4\n\n; cgit requires cgi\nplugins = cgi\n\n; location where all uwsgi plugins were installed\nplugins-dir = /usr/lib64/uwsgi/\n\n; modifier for uwsgi packets to fit into cgi standard\n; https://uwsgi-docs.readthedocs.io/en/latest/Protocol.html\nhttp-modifier1 = 9\n\n; name can be any\nsocket = /run/uwsgi_cgit/uwsgi_cgit.sock\nchmod-socket = 600\npidfile = /run/uwsgi_cgit/uwsgi_cgit.pid\n\n; can be any address:port on localhost\n; useful for debugging - just curl that address\n; http = 127.0.0.7:7777\n\n; location where the cgi binary was installed\n; MUST BE CHANGED accordingly in case of installing another cgit version\nchdir = /usr/share/webapps/cgit/1.2.3-r201/hostroot/cgi-bin\n\n; cgi binary name\ncgi = cgit.cgi\n\n; this is an alternative to nginx rewrite rule\n; \"rewrite ^/subdirectory/(.*)$ /subdirectory/$1?url=/$1 break;\"\nroute-uri = ^/(.*) rewrite:/$1\n```\n\n```sh\nroot # ln -s /etc/init.d/uwsgi /etc/init.d/uwsgi.cgit\n```\n\n```sh\n# Distributed under the terms of the GNU General Public License v2\n\n# Additional options you might want to pass to uWSGI\n#\nUWSGI_EXTRA_OPTIONS=\"--ini /home/git/uwsgi.cgit.ini\"\n\n# The application will run as nginx:nginx even without these,\n# because uid and gid are set to nginx in /home/someuser/uwsgi.cgit.ini,\n# but these are necessary for changing permissions of the directory\n# /run/uwsgi_cgit (and permitting the application to create a socket there)\n#\nUWSGI_USER=nginx\nUWSGI_GROUP=nginx\n```\n\n## nginx\n\nfor nginx, just make a server and make sure it looks something like this and add some ssl certs\n\n```sh\nserver {\n    listen 80;\n    server_name git.ahwx.org ;\n\n    root /home/git/;\n    try_files $uri @cgit;\n\n    location ~* ^.+(cgit.(css|png)|favicon.ico) {\n        root /usr/share/webapps/cgit/1.2.3-r201/htdocs/;\n        expires 30d;\n    }\n\n    location / {\n        uwsgi_pass uwsgi_cgit;\n        include uwsgi_params;\n        uwsgi_param PATH_INFO $1;\n        uwsgi_modifier1 9;\n        uwsgi_param GIT_HTTP_EXPORT_ALL \"\";\n        uwsgi_param GIT_PROJECT_ROOT /home/git;\n    }\n}\n```\n\n## start it\n\n```sh\nrc-service uwsgi.cgit start\nrc-service nginx restart\nrc-update add uwsgi.cgit default\nrc-update add nginx default\n```\n\n# make sure to:\n\n* change the version for cgit on every update\n* check if git clone works over http\n* keep you stuff updated\n\n\n\n\n\n\n\n";
				}
				function compiledContent() {
					return html;
				}
				function getHeadings() {
					return [{"depth":2,"slug":"titledate-2023-02-16","text":"title:\ndate: 2023-02-16"},{"depth":1,"slug":"set-up-cgit-using-uwsgi--nginx-on-gentoo","text":"set up cgit using uwsgi & nginx on gentoo"},{"depth":2,"slug":"my-etccgitrc-tweak-what-you-want","text":"my /etc/cgitrc, tweak what you want:"},{"depth":2,"slug":"homegituwsgicgitini","text":"/home/git/uwsgi.cgit.ini"},{"depth":2,"slug":"nginx","text":"nginx"},{"depth":2,"slug":"start-it","text":"start it"},{"depth":1,"slug":"make-sure-to","text":"make sure to:"}];
				}

				const Content = createComponent((result, _props, slots) => {
					const { layout, ...content } = frontmatter;
					content.file = file;
					content.url = url;

					return renderTemplate`${renderComponent(result, 'Layout', $$BlogPost, {
								file,
								url,
								content,
								frontmatter: content,
								headings: getHeadings(),
								rawContent,
								compiledContent,
								'server:root': true,
							}, {
								'default': () => renderTemplate`${unescapeHTML(html)}`
							})}`;
				});

export { Content, compiledContent, Content as default, file, frontmatter, getHeadings, rawContent, url };
